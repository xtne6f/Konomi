import{d as Z,c as v,F as A,g as le,k as V,h as m,b as e,e as b,t as c,r as W,n as z,o as n,_ as ee,a as r,w as B,A as M,U as T,P as G,N as me,R as N,q as Q,u as ce,C as S,l as C,f as pe,p as x,j as ge,Q as F,M as R,ab as _e,E as fe,G as he,T as ye,af as be,ag as we,ah as ke,ai as $e,aj as Me,ak as ae,al as Ve,am as X,an as H,O as Be,ao as Le,ap as Pe,I as Ie,aq as Ce,ar as Se,as as Re,at as He,J as ze,au as Ae,X as J,av as oe,a3 as ie,V as D,s as se,B as xe}from"./index-BebOPRX0.js";import{V as Te}from"./VDialog-CADLn9BY.js";import{a as Fe,V as De}from"./VCard-LU-RVUOt.js";import{V as Ne}from"./ssrBoot-BiZd6L-4.js";import{V as re}from"./Videos-DX4Yknbt.js";import{b as We,V as j,a as q,c as Ee,d as Ue}from"./VSelect-DfSWdd6k.js";const Oe={class:"breadcrumbs"},Ye={class:"breadcrumbs__item-text"},je=Z({__name:"Breadcrumbs",props:{crumbs:{}},setup(t){return(s,a)=>{const f=W("Icon"),o=W("router-link");return n(),v("div",Oe,[(n(!0),v(A,null,le(s.crumbs,(u,h)=>(n(),V(o,{key:h,to:u.path,class:z(["breadcrumbs__item",{"breadcrumbs__item--disabled":u.disabled}]),event:u.disabled?"":"click"},{default:m(()=>[e("span",Ye,c(u.name),1),h<s.crumbs.length-1?(n(),V(f,{key:0,icon:"fluent:chevron-right-12-regular",width:"16px",class:"breadcrumbs__item-separator"})):b("",!0)]),_:2},1032,["to","class","event"]))),128))])}}}),_a=ee(je,[["__scopeId","data-v-1a3a34d9"]]),qe={class:"px-5 pb-6"},Ge={class:"text-subtitle-1 d-flex align-center font-weight-bold mt-2"},Ke={class:"video-info__item"},Xe={class:"video-info__item-value"},Je={class:"video-info__item"},Qe={class:"video-info__item-value"},Ze={class:"video-info__item"},et={class:"video-info__item-value"},tt={class:"video-info__item"},at={class:"video-info__item-value"},ot={class:"text-subtitle-1 d-flex align-center font-weight-bold mt-3"},it={class:"video-info__item"},st={class:"video-info__item-value"},rt={class:"video-info__item"},lt={class:"video-info__item-value"},nt={class:"video-info__item"},dt={class:"video-info__item-value"},ut={class:"video-info__item"},vt={class:"video-info__item-value"},mt={class:"text-subtitle-1 d-flex align-center font-weight-bold mt-3"},ct={class:"video-info__item"},pt={class:"video-info__item-value"},gt={class:"video-info__item"},_t={class:"video-info__item-value"},ft={class:"video-info__item"},ht={class:"video-info__item-value"},yt={key:0,class:"text-subtitle-1 d-flex align-center font-weight-bold mt-3"},bt={class:"video-info__item"},wt={class:"video-info__item-value"},kt={class:"video-info__item"},$t={class:"video-info__item-value"},Mt={class:"video-info__item"},Vt={class:"video-info__item-value"},Bt=Z({__name:"RecordedFileInfoDialog",props:{program:{},show:{type:Boolean}},emits:["update:show"],setup(t){return(s,a)=>{const f=W("Icon");return n(),V(Te,{"max-width":"770",transition:"slide-y-transition","model-value":s.show,"onUpdate:modelValue":a[1]||(a[1]=o=>s.$emit("update:show",o))},{default:m(()=>[r(Fe,{class:"video-info"},{default:m(()=>[r(De,{class:"px-5 pt-6 pb-3 d-flex align-center font-weight-bold",style:{height:"60px"}},{default:m(()=>[r(f,{icon:"fluent:document-20-filled",height:"26px"}),a[2]||(a[2]=e("span",{class:"ml-3"},"録画ファイル情報",-1)),r(Ne),B((n(),v("div",{class:"d-flex align-center rounded-circle cursor-pointer px-2 py-2",onClick:a[0]||(a[0]=o=>s.$emit("update:show",!1))},[r(f,{icon:"fluent:dismiss-12-filled",width:"23px",height:"23px"})])),[[N]])]),_:1}),e("div",qe,[e("div",Ge,[r(f,{icon:"fluent:video-clip-20-filled",width:"24px",height:"20px"}),a[3]||(a[3]=e("span",{class:"ml-2"},"ファイル情報",-1))]),e("div",Ke,[a[4]||(a[4]=e("div",{class:"video-info__item-label"},"ファイルパス",-1)),e("div",Xe,c(s.program.recorded_video.file_path),1)]),e("div",Je,[a[5]||(a[5]=e("div",{class:"video-info__item-label"},"ファイルサイズ",-1)),e("div",Qe,c(M(T).formatBytes(s.program.recorded_video.file_size)),1)]),e("div",Ze,[a[6]||(a[6]=e("div",{class:"video-info__item-label"},"録画期間",-1)),e("div",et,c(M(G).getRecordingTime(s.program)),1)]),e("div",tt,[a[7]||(a[7]=e("div",{class:"video-info__item-label"},"最終更新日時",-1)),e("div",at,c(M(me)(s.program.recorded_video.file_modified_at).format("YYYY/MM/DD (dd) HH:mm:ss")),1)]),e("div",ot,[r(f,{icon:"fluent:video-20-filled",width:"24px",height:"20px"}),a[8]||(a[8]=e("span",{class:"ml-2"},"映像情報",-1))]),e("div",it,[a[9]||(a[9]=e("div",{class:"video-info__item-label"},"コーデック",-1)),e("div",st,c(s.program.recorded_video.video_codec)+" ("+c(s.program.recorded_video.video_codec_profile)+")",1)]),e("div",rt,[a[10]||(a[10]=e("div",{class:"video-info__item-label"},"解像度",-1)),e("div",lt,c(s.program.recorded_video.video_resolution_width)+"×"+c(s.program.recorded_video.video_resolution_height),1)]),e("div",nt,[a[11]||(a[11]=e("div",{class:"video-info__item-label"},"フレームレート",-1)),e("div",dt,c(s.program.recorded_video.video_frame_rate)+" fps",1)]),e("div",ut,[a[12]||(a[12]=e("div",{class:"video-info__item-label"},"スキャン方式",-1)),e("div",vt,c(s.program.recorded_video.video_scan_type),1)]),e("div",mt,[r(f,{icon:"fluent:speaker-2-20-filled",width:"24px",height:"20px"}),a[13]||(a[13]=e("span",{class:"ml-2"},"音声情報（主音声）",-1))]),e("div",ct,[a[14]||(a[14]=e("div",{class:"video-info__item-label"},"コーデック",-1)),e("div",pt,c(s.program.recorded_video.primary_audio_codec),1)]),e("div",gt,[a[15]||(a[15]=e("div",{class:"video-info__item-label"},"チャンネル",-1)),e("div",_t,c(s.program.recorded_video.primary_audio_channel),1)]),e("div",ft,[a[16]||(a[16]=e("div",{class:"video-info__item-label"},"サンプリングレート",-1)),e("div",ht,c(s.program.recorded_video.primary_audio_sampling_rate?`${s.program.recorded_video.primary_audio_sampling_rate/1e3}kHz`:"不明"),1)]),s.program.recorded_video.secondary_audio_codec?(n(),v("div",yt,[r(f,{icon:"fluent:speaker-2-20-filled",width:"24px",height:"20px"}),a[17]||(a[17]=e("span",{class:"ml-2"},"音声情報（副音声）",-1))])):b("",!0),s.program.recorded_video.secondary_audio_codec?(n(),v(A,{key:1},[e("div",bt,[a[18]||(a[18]=e("div",{class:"video-info__item-label"},"コーデック",-1)),e("div",wt,c(s.program.recorded_video.secondary_audio_codec),1)]),e("div",kt,[a[19]||(a[19]=e("div",{class:"video-info__item-label"},"チャンネル",-1)),e("div",$t,c(s.program.recorded_video.secondary_audio_channel),1)]),e("div",Mt,[a[20]||(a[20]=e("div",{class:"video-info__item-label"},"サンプリングレート",-1)),e("div",Vt,c(s.program.recorded_video.secondary_audio_sampling_rate?`${s.program.recorded_video.secondary_audio_sampling_rate/1e3}kHz`:"不明"),1)])],64)):b("",!0)])]),_:1})]),_:1},8,["model-value"])}}}),Lt=ee(Bt,[["__scopeId","data-v-66a6f916"]]),Pt={class:"recorded-program__container"},It={class:"recorded-program__thumbnail"},Ct=["src"],St={class:"recorded-program__thumbnail-duration"},Rt={key:0,class:"recorded-program__thumbnail-status recorded-program__thumbnail-status--recording"},Ht={key:1,class:"recorded-program__thumbnail-status recorded-program__thumbnail-status--analyzing"},zt={key:2,class:"recorded-program__thumbnail-status recorded-program__thumbnail-status--partial"},At={key:3,class:"recorded-program__thumbnail-progress"},xt={class:"recorded-program__content"},Tt=["innerHTML"],Ft={class:"recorded-program__content-meta"},Dt={key:0,class:"recorded-program__content-meta-broadcaster"},Nt=["src"],Wt={class:"recorded-program__content-meta-broadcaster-name"},Et={key:1,class:"recorded-program__content-meta-broadcaster"},Ut={class:"recorded-program__content-meta-time"},Ot=["innerHTML"],Yt={key:0,width:"22px",height:"22px",viewBox:"0 0 16 16"},jt={key:0,width:"22px",height:"22px",viewBox:"0 0 16 16"},qt={key:1,width:"22px",height:"22px",viewBox:"0 0 15.2 15.2"},Gt={class:"recorded-program__menu"},Kt=Z({__name:"RecordedProgram",props:{program:{},forMylist:{type:Boolean,default:!1},forWatchedHistory:{type:Boolean,default:!1}},setup(t){const s=t,a=Q(!1),f=()=>{window.location.href=`${T.api_base_url}/videos/${s.program.id}/download`},o=async()=>{R.success("メタデータの再解析を開始します。完了までしばらくお待ちください。"),(await re.reanalyzeVideo(s.program.id)).is_success&&R.success("メタデータの再解析が完了しました。")},u=async(l=!1)=>{R.success("サムネイルの再作成を開始しました。完了までしばらくお待ちください。"),(await re.regenerateThumbnail(s.program.id,l)).is_success&&R.success("サムネイルの再作成が完了しました。")},h=ce(),g=()=>{h.settings.mylist.some(i=>i.type==="RecordedProgram"&&i.id===s.program.id)?(h.settings.mylist=h.settings.mylist.filter(i=>!(i.type==="RecordedProgram"&&i.id===s.program.id)),R.show("マイリストから削除しました。")):(h.settings.mylist.push({type:"RecordedProgram",id:s.program.id,created_at:T.time()}),R.success("マイリストに追加しました。"))},E=S(()=>h.settings.mylist.some(l=>l.type==="RecordedProgram"&&l.id===s.program.id)),K=S(()=>h.settings.watched_history.find(l=>l.video_id===s.program.id)),U=()=>{h.settings.watched_history=h.settings.watched_history.filter(l=>l.video_id!==s.program.id),R.show("視聴履歴から削除しました。")};return(l,i)=>{const y=W("Icon"),k=W("router-link"),L=ge("ftooltip");return n(),v(A,null,[B((n(),V(k,{class:z(["recorded-program",{"recorded-program--recording":l.program.recorded_video.status==="Recording","recorded-program--analyzing":!l.program.recorded_video.has_key_frames}]),to:l.program.recorded_video.status==="Recording"||!l.program.recorded_video.has_key_frames?{path:""}:`/videos/watch/${l.program.id}`},{default:m(()=>[e("div",Pt,[e("div",It,[e("img",{class:"recorded-program__thumbnail-image",loading:"lazy",decoding:"async",src:`${M(T).api_base_url}/videos/${l.program.id}/thumbnail`},null,8,Ct),e("div",St,c(M(G).getProgramDuration(l.program)),1),l.program.recorded_video.status==="Recording"?(n(),v("div",Rt,i[8]||(i[8]=[e("div",{class:"recorded-program__thumbnail-status-dot"},null,-1),C(" 録画中 ")]))):l.program.recorded_video.has_key_frames?l.program.is_partially_recorded?(n(),v("div",zt," ⚠️ 一部のみ録画 ")):b("",!0):(n(),v("div",Ht,[r(y,{icon:"fluent:clock-12-regular",width:"15px",height:"15px"}),i[9]||(i[9]=C(" メタデータ解析中 "))])),K.value?(n(),v("div",At,[e("div",{class:"recorded-program__thumbnail-progress-bar",style:pe(`width: ${K.value.last_playback_position/l.program.recorded_video.duration*100}%`)},null,4)])):b("",!0)]),e("div",xt,[e("div",{class:"recorded-program__content-title",innerHTML:M(G).decorateProgramInfo(l.program,"title")},null,8,Tt),e("div",Ft,[l.program.channel?(n(),v("div",Dt,[e("img",{class:"recorded-program__content-meta-broadcaster-icon",loading:"lazy",decoding:"async",src:`${M(T).api_base_url}/channels/${l.program.channel.id}/logo`},null,8,Nt),e("span",Wt,"Ch: "+c(l.program.channel.channel_number)+" "+c(l.program.channel.name),1)])):(n(),v("div",Et,i[10]||(i[10]=[e("span",{class:"recorded-program__content-meta-broadcaster-name"},"チャンネル情報なし",-1)]))),e("div",Ut,c(M(G).getProgramTime(l.program)),1)]),e("div",{class:"recorded-program__content-description",innerHTML:M(G).decorateProgramInfo(l.program,"description")},null,8,Ot)]),l.forWatchedHistory?b("",!0):B((n(),v("div",{key:0,class:z(["recorded-program__mylist",{"recorded-program__mylist--highlight":E.value&&!l.forMylist}]),onClick:x(g,["prevent","stop"]),onMousedown:i[0]||(i[0]=x(()=>{},["prevent","stop"]))},[l.forMylist?(n(),v("svg",Yt,i[11]||(i[11]=[e("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0M6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5"},null,-1)]))):(n(),v(A,{key:1},[E.value?(n(),v("svg",jt,i[12]||(i[12]=[e("path",{fill:"currentColor",d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032"},null,-1)]))):(n(),v("svg",qt,i[13]||(i[13]=[e("path",{fill:"currentColor",d:"M8 2.5a.5.5 0 0 0-1 0V7H2.5a.5.5 0 0 0 0 1H7v4.5a.5.5 0 0 0 1 0V8h4.5a.5.5 0 0 0 0-1H8z"},null,-1)])))],64))],34)),[[N],[L,E.value?"マイリストから削除する":"マイリストに追加する"]]),l.forWatchedHistory?B((n(),v("div",{key:1,class:"recorded-program__mylist",onClick:x(U,["prevent","stop"]),onMousedown:i[1]||(i[1]=x(()=>{},["prevent","stop"]))},i[14]||(i[14]=[e("svg",{width:"22px",height:"22px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0M6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5"})],-1)]),32)),[[N],[L,"視聴履歴から削除する"]]):b("",!0),e("div",Gt,[r(Ee,{location:"bottom end","close-on-content-click":!0},{activator:m(({props:P})=>[B((n(),v("div",F({class:"recorded-program__menu-button"},P,{onClick:i[2]||(i[2]=x(()=>{},["prevent","stop"])),onMousedown:i[3]||(i[3]=x(()=>{},["prevent","stop"]))}),i[15]||(i[15]=[e("svg",{width:"19px",height:"19px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M9.5 13a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0"})],-1)]),16)),[[N]])]),default:m(()=>[r(We,{density:"compact","bg-color":"background-lighten-1",class:"recorded-program__menu-list"},{default:m(()=>[r(j,{onClick:i[4]||(i[4]=P=>a.value=!0)},{prepend:m(()=>i[16]||(i[16]=[e("svg",{width:"20px",height:"20px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M8.499 7.5a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0zm.25-2a.749.749 0 1 1-1.499 0a.749.749 0 0 1 1.498 0M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1M2 8a6 6 0 1 1 12 0A6 6 0 0 1 2 8"})],-1)])),default:m(()=>[r(q,{class:"ml-3"},{default:m(()=>i[17]||(i[17]=[C("録画ファイル情報を表示")])),_:1})]),_:1}),r(j,{onClick:f,disabled:l.program.recorded_video.status==="Recording"},{prepend:m(()=>[r(y,{icon:"fluent:arrow-download-24-regular",width:"20px",height:"20px"})]),default:m(()=>[r(q,{class:"ml-3"},{default:m(()=>[C("録画ファイルをダウンロード ("+c(M(T).formatBytes(l.program.recorded_video.file_size))+")",1)]),_:1})]),_:1},8,["disabled"]),B((n(),V(j,{onClick:o},{prepend:m(()=>[r(y,{icon:"fluent:book-arrow-clockwise-20-regular",width:"20px",height:"20px"})]),default:m(()=>[r(q,{class:"ml-3"},{default:m(()=>i[18]||(i[18]=[C("メタデータを再解析")])),_:1})]),_:1})),[[L,"再生時に必要な録画ファイル情報や番組情報などを解析し直します"]]),B((n(),V(j,{onClick:i[5]||(i[5]=P=>u(!0))},{prepend:m(()=>[r(y,{icon:"fluent:image-arrow-counterclockwise-24-regular",width:"20px",height:"20px"})]),default:m(()=>[r(q,{class:"ml-3"},{default:m(()=>i[19]||(i[19]=[C("サムネイルを更新")])),_:1})]),_:1})),[[L,"既存のシークバー用サムネイルから代表サムネイルを選び直します 変更反映にはブラウザキャッシュの削除が必要です"]]),B((n(),V(j,{onClick:i[6]||(i[6]=P=>u(!1))},{prepend:m(()=>[r(y,{icon:"fluent:image-arrow-counterclockwise-24-regular",width:"20px",height:"20px"})]),default:m(()=>[r(q,{class:"ml-3"},{default:m(()=>i[20]||(i[20]=[C("サムネイルを再作成")])),_:1})]),_:1})),[[L,"サムネイルを完全に作り直します（数分かかります） 変更反映にはブラウザキャッシュの削除が必要です"]])]),_:1})]),_:1})])])]),_:1},8,["to","class"])),[[N]]),r(Lt,{program:l.program,show:a.value,"onUpdate:show":i[7]||(i[7]=P=>a.value=P)},null,8,["program","show"])],64)}}}),Xt=ee(Kt,[["__scopeId","data-v-1cddd4e4"]]);function Jt(){const t=Q([]);_e(()=>t.value=[]);function s(a,f){t.value[f]=a}return{refs:t,updateRef:s}}const Qt=he({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:t=>t.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:t=>t%1===0},totalVisible:[Number,String],firstIcon:{type:J,default:"$first"},prevIcon:{type:J,default:"$prev"},nextIcon:{type:J,default:"$next"},lastIcon:{type:J,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Ae(),...ze(),...He(),...Re(),...Se(),...Ce(),...Ie({tag:"nav"}),...Pe(),...Le({variant:"text"})},"VPagination"),Zt=fe()({name:"VPagination",props:Qt(),emits:{"update:modelValue":t=>!0,first:t=>!0,prev:t=>!0,next:t=>!0,last:t=>!0},setup(t,s){let{slots:a,emit:f}=s;const o=ye(t,"modelValue"),{t:u,n:h}=be(),{isRtl:g}=we(),{themeClasses:E}=ke(t),{width:K}=$e(),U=Me(-1);ae(void 0,{scoped:!0});const{resizeRef:l}=Ve(d=>{if(!d.length)return;const{target:p,contentRect:_}=d[0],w=p.querySelector(".v-pagination__list > *");if(!w)return;const $=_.width,Y=w.offsetWidth+parseFloat(getComputedStyle(w).marginRight)*2;U.value=L($,Y)}),i=S(()=>parseInt(t.length,10)),y=S(()=>parseInt(t.start,10)),k=S(()=>t.totalVisible!=null?parseInt(t.totalVisible,10):U.value>=0?U.value:L(K.value,58));function L(d,p){const _=t.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((d-p*_)/p).toFixed(2)))}const P=S(()=>{if(i.value<=0||isNaN(i.value)||i.value>Number.MAX_SAFE_INTEGER)return[];if(k.value<=0)return[];if(k.value===1)return[o.value];if(i.value<=k.value)return X(i.value,y.value);const d=k.value%2===0,p=d?k.value/2:Math.floor(k.value/2),_=d?p:p+1,w=i.value-p;if(_-o.value>=0)return[...X(Math.max(1,k.value-1),y.value),t.ellipsis,i.value];if(o.value-w>=(d?1:0)){const $=k.value-1,Y=i.value-$+y.value;return[y.value,t.ellipsis,...X($,Y)]}else{const $=Math.max(1,k.value-2),Y=$===1?o.value:o.value-Math.ceil($/2)+y.value;return[y.value,t.ellipsis,...X($,Y),t.ellipsis,i.value]}});function O(d,p,_){d.preventDefault(),o.value=p,_&&f(_,p)}const{refs:ne,updateRef:de}=Jt();ae({VPaginationBtn:{color:H(t,"color"),border:H(t,"border"),density:H(t,"density"),size:H(t,"size"),variant:H(t,"variant"),rounded:H(t,"rounded"),elevation:H(t,"elevation")}});const ue=S(()=>P.value.map((d,p)=>{const _=w=>de(w,p);if(typeof d=="string")return{isActive:!1,key:`ellipsis-${p}`,page:d,props:{ref:_,ellipsis:!0,icon:!0,disabled:!0}};{const w=d===o.value;return{isActive:w,key:d,page:h(d),props:{ref:_,ellipsis:!1,icon:!0,disabled:!!t.disabled||+t.length<2,color:w?t.activeColor:t.color,"aria-current":w,"aria-label":u(w?t.currentPageAriaLabel:t.pageAriaLabel,d),onClick:$=>O($,d)}}}})),I=S(()=>{const d=!!t.disabled||o.value<=y.value,p=!!t.disabled||o.value>=y.value+i.value-1;return{first:t.showFirstLastPage?{icon:g.value?t.lastIcon:t.firstIcon,onClick:_=>O(_,y.value,"first"),disabled:d,"aria-label":u(t.firstAriaLabel),"aria-disabled":d}:void 0,prev:{icon:g.value?t.nextIcon:t.prevIcon,onClick:_=>O(_,o.value-1,"prev"),disabled:d,"aria-label":u(t.previousAriaLabel),"aria-disabled":d},next:{icon:g.value?t.prevIcon:t.nextIcon,onClick:_=>O(_,o.value+1,"next"),disabled:p,"aria-label":u(t.nextAriaLabel),"aria-disabled":p},last:t.showFirstLastPage?{icon:g.value?t.firstIcon:t.lastIcon,onClick:_=>O(_,y.value+i.value-1,"last"),disabled:p,"aria-label":u(t.lastAriaLabel),"aria-disabled":p}:void 0}});function te(){var p;const d=o.value-y.value;(p=ne.value[d])==null||p.$el.focus()}function ve(d){d.key===oe.left&&!t.disabled&&o.value>+t.start?(o.value=o.value-1,ie(te)):d.key===oe.right&&!t.disabled&&o.value<y.value+i.value-1&&(o.value=o.value+1,ie(te))}return Be(()=>r(t.tag,{ref:l,class:["v-pagination",E.value,t.class],style:t.style,role:"navigation","aria-label":u(t.ariaLabel),onKeydown:ve,"data-test":"v-pagination-root"},{default:()=>[r("ul",{class:"v-pagination__list"},[t.showFirstLastPage&&r("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(I.value.first):r(D,F({_as:"VPaginationBtn"},I.value.first),null)]),r("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(I.value.prev):r(D,F({_as:"VPaginationBtn"},I.value.prev),null)]),ue.value.map((d,p)=>r("li",{key:d.key,class:["v-pagination__item",{"v-pagination__item--is-active":d.isActive}],"data-test":"v-pagination-item"},[a.item?a.item(d):r(D,F({_as:"VPaginationBtn"},d.props),{default:()=>[d.page]})])),r("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(I.value.next):r(D,F({_as:"VPaginationBtn"},I.value.next),null)]),t.showFirstLastPage&&r("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(I.value.last):r(D,F({_as:"VPaginationBtn"},I.value.last),null)])])]})),{}}}),ea={key:0,class:"recorded-program-list__header"},ta={class:"recorded-program-list__title"},aa={class:"recorded-program-list__title-text"},oa={key:1,class:"recorded-program-list__title-count"},ia={class:"recorded-program-list__empty-content"},sa=["innerHTML"],ra=["innerHTML"],la={class:"recorded-program-list__grid-content"},na={key:1,class:"recorded-program-list__pagination"},da=Z({__name:"RecordedProgramList",props:{title:{},programs:{},total:{},page:{default:1},sortOrder:{default:"desc"},hideHeader:{type:Boolean,default:!1},hideSort:{type:Boolean,default:!1},hidePagination:{type:Boolean,default:!1},showMoreButton:{type:Boolean,default:!1},showBackButton:{type:Boolean,default:!1},showEmptyMessage:{type:Boolean,default:!0},emptyIcon:{default:"fluent:warning-20-regular"},emptyMessage:{default:"録画番組が見つかりませんでした。"},emptySubMessage:{default:'サーバー設定で録画フォルダのパスを<br class="d-sm-none">正しく設定できているか確認してください。'},isLoading:{type:Boolean,default:!1},isSearching:{type:Boolean,default:!1},forMylist:{type:Boolean,default:!1},forWatchedHistory:{type:Boolean,default:!1}},emits:["update:page","update:sortOrder","more"],setup(t){xe();const s=t,a=Q(s.page),f=Q(s.sortOrder);return se(()=>s.page,o=>{a.value=o}),se(()=>s.sortOrder,o=>{f.value=o}),(o,u)=>{const h=W("Icon");return n(),v("div",{class:z(["recorded-program-list",{"recorded-program-list--show-sort":!o.hideSort}])},[o.hideHeader?b("",!0):(n(),v("div",ea,[e("h2",ta,[o.showBackButton?B((n(),v("div",{key:0,class:"recorded-program-list__title-back",onClick:u[0]||(u[0]=g=>o.$router.back())},[r(h,{icon:"fluent:chevron-left-12-filled",width:"27px"})])),[[N]]):b("",!0),e("span",aa,c(o.title),1),o.showMoreButton?b("",!0):(n(),v("div",oa,[o.isSearching?(n(),v(A,{key:0},[r(h,{icon:"line-md:loading-twotone-loop",class:"mr-1 spin",width:"20px",height:"20px"}),u[6]||(u[6]=e("span",null,"検索中...",-1))],64)):(n(),v(A,{key:1},[C(c(o.total)+"件",1)],64))]))]),e("div",{class:z(["recorded-program-list__actions",{"recorded-program-list__actions--mylist":o.forMylist}])},[o.hideSort?b("",!0):(n(),V(Ue,{key:0,modelValue:f.value,"onUpdate:modelValue":[u[1]||(u[1]=g=>f.value=g),u[2]||(u[2]=g=>o.$emit("update:sortOrder",g))],items:o.forMylist?[{title:"追加が新しい順",value:"mylist_added_desc"},{title:"追加が古い順",value:"mylist_added_asc"},{title:"録画が新しい順",value:"recorded_desc"},{title:"録画が古い順",value:"recorded_asc"}]:[{title:"新しい順",value:"desc"},{title:"古い順",value:"asc"}],"item-title":"title","item-value":"value",class:"recorded-program-list__sort",color:"primary","bg-color":"background-lighten-1",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue","items"])),o.showMoreButton?(n(),V(D,{key:1,variant:"text",class:"recorded-program-list__more",onClick:u[3]||(u[3]=g=>o.$emit("more"))},{default:m(()=>[u[7]||(u[7]=e("span",{class:"text-primary"},"もっと見る",-1)),r(h,{icon:"fluent:chevron-right-12-regular",width:"18px",class:"ml-1 text-text-darken-1",style:{margin:"0px -4px"}})]),_:1})):b("",!0)],2)])),e("div",{class:z(["recorded-program-list__grid",{"recorded-program-list__grid--loading":o.isLoading||o.isSearching,"recorded-program-list__grid--empty":o.total===0&&o.showEmptyMessage,"recorded-program-list__grid--searching":o.isSearching}])},[e("div",{class:z(["recorded-program-list__empty",{"recorded-program-list__empty--show":o.total===0&&o.showEmptyMessage&&!o.isSearching}])},[e("div",ia,[r(h,{class:"recorded-program-list__empty-icon",icon:o.emptyIcon,width:"54px",height:"54px"},null,8,["icon"]),e("h2",{innerHTML:o.emptyMessage},null,8,sa),o.emptySubMessage?(n(),v("div",{key:0,class:"recorded-program-list__empty-submessage",innerHTML:o.emptySubMessage},null,8,ra)):b("",!0)])],2),e("div",la,[(n(!0),v(A,null,le(o.programs,g=>(n(),V(Xt,{key:g.id,program:g,forMylist:o.forMylist,forWatchedHistory:o.forWatchedHistory},null,8,["program","forMylist","forWatchedHistory"]))),128))])],2),!o.hidePagination&&o.total>0?(n(),v("div",na,[r(Zt,{modelValue:a.value,"onUpdate:modelValue":[u[4]||(u[4]=g=>a.value=g),u[5]||(u[5]=g=>o.$emit("update:page",g))],"active-color":"primary",density:"comfortable",length:Math.ceil(o.total/30),"total-visible":7},null,8,["modelValue","length"])])):b("",!0)],2)}}}),fa=ee(da,[["__scopeId","data-v-0d4ea47a"]]);export{_a as B,fa as R};
